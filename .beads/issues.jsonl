{"id":"sparka-0g6","title":"Point subscription CTAs to Ghost portal - IN PROGRESS","description":"Update all upgrade/subscribe links to https://masonjames.com/#/portal","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-07T20:33:31.072005-05:00","updated_at":"2025-11-07T20:38:21.364554-05:00","closed_at":"2025-11-07T20:38:21.364554-05:00"}
{"id":"sparka-0kt","title":"Test MVP locally and deploy to production - READY FOR TESTING","description":"Comprehensive local testing then production deployment","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-07T20:33:31.168204-05:00","updated_at":"2025-11-07T20:59:27.250198-05:00","closed_at":"2025-11-07T20:59:27.250198-05:00"}
{"id":"sparka-0sg","title":"Cleanup: Remove Vercel Blob dependency after R2 migration","description":"After R2 migration is complete and verified: (1) remove @vercel/blob from package.json, (2) remove BLOB_READ_WRITE_TOKEN from env schema and .env.example, (3) remove Vercel blob remotePatterns from next.config.ts, (4) update platform-infra docs to reflect R2 storage.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-08T18:44:22.4672-05:00","updated_at":"2025-12-08T19:12:51.682803-05:00","closed_at":"2025-12-08T19:12:51.682803-05:00","dependencies":[{"issue_id":"sparka-0sg","depends_on_id":"sparka-rha","type":"blocks","created_at":"2025-12-08T18:47:24.155713-05:00","created_by":"daemon"},{"issue_id":"sparka-0sg","depends_on_id":"sparka-aso","type":"blocks","created_at":"2025-12-08T18:47:24.186309-05:00","created_by":"daemon"}]}
{"id":"sparka-11w","title":"Create backup branch before upstream merge","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-07T16:37:26.17918-05:00","updated_at":"2025-11-07T16:37:42.451669-05:00","closed_at":"2025-11-07T16:37:42.451669-05:00"}
{"id":"sparka-4m3","title":"Fix Redis connection issue preventing LLM queries","description":"Redis URL not resolving - likely expired Upstash instance","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-07T19:58:30.604552-05:00","updated_at":"2025-11-07T20:00:43.024884-05:00","closed_at":"2025-11-07T20:00:43.024884-05:00"}
{"id":"sparka-4sa","title":"Design R2 migration strategy for Sparka file uploads","description":"Current state: lib/blob.ts uses @vercel/blob with prefix sparka-ai/files/. Need to decide: (1) R2 bucket name and region, (2) assets domain (assets.chat.masonjames.com vs assets.sparka.chat), (3) migration strategy for existing files, (4) whether to support dual backends during transition. Document decisions before implementation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T18:43:47.487862-05:00","updated_at":"2025-12-08T18:54:24.64979-05:00","closed_at":"2025-12-08T18:54:24.64979-05:00"}
{"id":"sparka-7sj","title":"Implement R2 storage adapter for Sparka file uploads","description":"Replace @vercel/blob usage in lib/blob.ts with AWS S3 SDK (@aws-sdk/client-s3) configured for R2. Maintain same interface: uploadFile, listFiles, deleteFilesByUrls, extractFilenameFromUrl, isBlobUrl. Use R2_ENDPOINT for Cloudflare R2 compatibility. Keep BLOB_FILE_PREFIX (sparka-ai/files/) for path consistency.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T18:44:02.790782-05:00","updated_at":"2025-12-08T19:12:51.618258-05:00","closed_at":"2025-12-08T19:12:51.618258-05:00","dependencies":[{"issue_id":"sparka-7sj","depends_on_id":"sparka-96o","type":"blocks","created_at":"2025-12-08T18:47:23.987938-05:00","created_by":"daemon"},{"issue_id":"sparka-7sj","depends_on_id":"sparka-dqe","type":"blocks","created_at":"2025-12-08T18:47:24.01689-05:00","created_by":"daemon"}]}
{"id":"sparka-8xw","title":"Merge upstream/main into local main branch","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-07T16:37:26.265225-05:00","updated_at":"2025-11-07T16:41:31.060935-05:00","closed_at":"2025-11-07T16:41:31.060935-05:00"}
{"id":"sparka-96o","title":"Provision R2 bucket and custom domain for Sparka assets","description":"Create Cloudflare R2 bucket 'sparka-assets' with custom domain assets.chat.masonjames.com.\n\n## Steps:\n1. **Create R2 bucket in Cloudflare Dashboard**:\n   - Go to Cloudflare Dashboard \u003e R2 Object Storage\n   - Create bucket named 'sparka-assets'\n   - Enable public access via custom domain\n\n2. **Configure custom domain**:\n   - In bucket settings, add custom domain: assets.chat.masonjames.com\n   - Cloudflare auto-creates CNAME record pointing to R2\n\n3. **Create R2 API credentials**:\n   - Go to R2 \u003e Manage R2 API Tokens\n   - Create token with Object Read \u0026 Write permissions for 'sparka-assets' bucket\n   - Note: Access Key ID and Secret Access Key\n\n4. **Store credentials in 1Password**:\n   - Create item 'sparka-r2-assets' in vault cecouqf4ucde6ap376ffb4ggva\n   - Fields: access_key_id, secret_access_key, bucket (sparka-assets), endpoint (https://\u003caccount-id\u003e.r2.cloudflarestorage.com), public_url (https://assets.chat.masonjames.com)\n\n5. **Configure CORS** (if needed):\n   - Allow origin: https://chat.masonjames.com\n   - Methods: GET, PUT, DELETE\n   - Headers: Content-Type","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T18:43:52.576803-05:00","updated_at":"2025-12-08T19:25:20.515356-05:00","closed_at":"2025-12-08T19:25:20.515356-05:00","dependencies":[{"issue_id":"sparka-96o","depends_on_id":"sparka-4sa","type":"blocks","created_at":"2025-12-08T18:47:23.922413-05:00","created_by":"daemon"}]}
{"id":"sparka-aso","title":"Update Dokploy env vars for Sparka R2 credentials","description":"Add R2 credentials from 1Password to Dokploy app sparka-ai-chat-sparka-p8yt1a: R2_ACCESS_KEY_ID, R2_SECRET_ACCESS_KEY, R2_BUCKET, R2_ENDPOINT, R2_PUBLIC_URL. Remove BLOB_READ_WRITE_TOKEN after migration complete. Redeploy to apply.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T18:44:17.509081-05:00","updated_at":"2025-12-08T19:35:42.348205-05:00","closed_at":"2025-12-08T19:35:42.348205-05:00","dependencies":[{"issue_id":"sparka-aso","depends_on_id":"sparka-96o","type":"blocks","created_at":"2025-12-08T18:47:24.103563-05:00","created_by":"daemon"},{"issue_id":"sparka-aso","depends_on_id":"sparka-7sj","type":"blocks","created_at":"2025-12-08T18:47:24.127932-05:00","created_by":"daemon"}]}
{"id":"sparka-bht","title":"Update next.config.ts remotePatterns for R2 assets domain","description":"Add the R2 custom domain (e.g., assets.chat.masonjames.com) to next.config.ts remotePatterns array to allow Next.js Image component to load from the new asset host. Keep Vercel blob patterns during transition.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T18:44:07.898467-05:00","updated_at":"2025-12-08T19:12:51.650379-05:00","closed_at":"2025-12-08T19:12:51.650379-05:00","dependencies":[{"issue_id":"sparka-bht","depends_on_id":"sparka-7sj","type":"blocks","created_at":"2025-12-08T18:47:24.047343-05:00","created_by":"daemon"}]}
{"id":"sparka-clw","title":"Update credits: free=100, subscriber=10000/month - IN PROGRESS","description":"Increase subscriber credits to 10,000 per month, keep free at 100","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-07T20:33:30.981783-05:00","updated_at":"2025-11-07T20:38:21.274574-05:00","closed_at":"2025-11-07T20:38:21.274574-05:00"}
{"id":"sparka-dd4","title":"Add email authentication - IN PROGRESS","description":"Configure Better Auth to support both passwordless and traditional email login","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-11-07T20:33:30.895715-05:00","updated_at":"2025-11-07T20:38:21.183219-05:00","closed_at":"2025-11-07T20:38:21.183219-05:00"}
{"id":"sparka-dqe","title":"Add R2/S3 environment variables to Sparka env schema","description":"Add to lib/env.ts: R2_ACCESS_KEY_ID, R2_SECRET_ACCESS_KEY, R2_BUCKET, R2_ENDPOINT, R2_PUBLIC_URL (custom domain). Update .env.example with placeholders. Keep BLOB_READ_WRITE_TOKEN as optional for transition period.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T18:43:57.230745-05:00","updated_at":"2025-12-08T19:07:08.222135-05:00","closed_at":"2025-12-08T19:07:08.222135-05:00","dependencies":[{"issue_id":"sparka-dqe","depends_on_id":"sparka-4sa","type":"blocks","created_at":"2025-12-08T18:47:23.958082-05:00","created_by":"daemon"}]}
{"id":"sparka-fk8","title":"Test locally - fixed DATABASE_URL env var","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-07T16:37:26.439358-05:00","updated_at":"2025-11-07T20:07:01.579146-05:00","closed_at":"2025-11-07T20:07:01.579146-05:00"}
{"id":"sparka-jgt","title":"Fix GHCR build: change runner image from Alpine to Debian slim","description":"The Dockerfile uses node:22-alpine for the runner stage but better-sqlite3 is compiled on Debian (glibc). Native binaries are incompatible with Alpine (musl). Change runner to node:22-slim and update user creation syntax from addgroup/adduser to groupadd/useradd.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-08T18:43:42.185363-05:00","updated_at":"2025-12-08T19:03:39.271566-05:00","closed_at":"2025-12-08T19:03:39.271566-05:00"}
{"id":"sparka-k0k","title":"Apply custom branding and fixes to upstream","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-07T16:37:26.353839-05:00","updated_at":"2025-11-07T16:43:01.41353-05:00","closed_at":"2025-11-07T16:43:01.41353-05:00"}
{"id":"sparka-rha","title":"Migrate existing Vercel Blob files to R2","description":"One-time migration script to copy existing files from Vercel Blob (sparka-ai/files/*) to R2 bucket. Preserve filenames and paths. Verify integrity with checksums. Document any files that fail migration. Can be run as standalone script or GitHub Action.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T18:44:12.443275-05:00","updated_at":"2025-12-08T18:54:24.748978-05:00","closed_at":"2025-12-08T18:54:24.748978-05:00","dependencies":[{"issue_id":"sparka-rha","depends_on_id":"sparka-7sj","type":"blocks","created_at":"2025-12-08T18:47:24.075676-05:00","created_by":"daemon"}]}
{"id":"sparka-ups","title":"Re-implement Stripe subscription system","description":"Re-implement Stripe payment system from documentation on fresh upstream codebase","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-07T16:42:57.073383-05:00","updated_at":"2025-11-07T20:33:31.256511-05:00","closed_at":"2025-11-07T20:33:31.256511-05:00"}
{"id":"sparka-wm0","title":"Report Turbopack React Query Devtools HMR issue upstream","description":"Document and report HMR issue with @tanstack/react-query-devtools to Next.js and TanStack teams. Issue doc created in commit message.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T20:15:41.843355-05:00","updated_at":"2025-11-07T20:15:41.843355-05:00"}
{"id":"sparka-y1d","title":"Document ongoing upstream sync workflow","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-07T16:37:26.527049-05:00","updated_at":"2025-11-07T18:21:46.776799-05:00","closed_at":"2025-11-07T18:21:46.776799-05:00"}
