---
title: Database
description: Database setup, migrations, and development workflows
---

ChatJS uses PostgreSQL with Drizzle ORM for type-safe database access.

## Schema

The database schema is defined in `lib/db/schema.ts`. Key tables:

| Table | Purpose |
|-------|---------|
| `user` | User accounts |
| `session` | Active sessions |
| `account` | OAuth provider links |
| `verification` | Email verification tokens |
| `userCredit` | User credit balances |
| `userModelPreference` | Per-user model enable/disable preferences |
| `project` | Project folders for organizing chats |
| `chat` | Chat conversations |
| `message` | Chat messages |
| `part` | Normalized message parts (text, tools, files) |
| `vote` | Message upvote/downvote feedback |
| `document` | Artifact documents |
| `suggestion` | AI-generated document suggestions |
| `mcpConnector` | MCP server connections |
| `mcpOAuthSession` | OAuth sessions for MCP servers |

## Migrations

Generate and run migrations with:

```bash
# Generate migration from schema changes
bun db:generate

# Run pending migrations
bun db:migrate

# Push schema directly (dev only, no migration file)
bun db:push
```

## Neon Branching

When working on schema changes, use Neon branching to avoid affecting production data. See the [Neon Branching recipe](/cookbook/data/neon-branching) for setup and usage.

## Drizzle Studio

Inspect your database with Drizzle Studio:

```bash
bun db:studio
```

Opens a web UI at `https://local.drizzle.studio` for browsing and editing data.
