---
title: Config Reference
description: Full chat.config.ts API reference
---

## Overview

`chat.config.ts` is the central configuration for ChatJS. It's generated by the CLI (`npx @chat-js/cli@latest create`) from `lib/config-schema.ts` with sensible defaults and inline comments.

## Access patterns

To access the config, import it from `@/lib/config`:

```ts
import { config } from "@/lib/config";

const { appName } = config;
```

## Configuration Shape

The schema is defined in `lib/config-schema.ts`. Each field's `.describe()` comment appears as an inline comment in the generated config.

```ts
export type PricingConfig = {
  currency?: string;
  free?: {
    name: string;
    summary: string;
  };
  pro?: {
    name: string;
    monthlyPrice: number;
    summary: string;
  };
};

export type FeaturesConfig = {
  /** Code sandbox execution (Vercel-native) */
  sandbox: boolean;
  /** Web search (requires TAVILY_API_KEY or FIRECRAWL_API_KEY) */
  webSearch: boolean;
  /** URL content retrieval (requires FIRECRAWL_API_KEY) */
  urlRetrieval: boolean;
  /** Deep research agent (requires webSearch) */
  deepResearch: boolean;
  /** MCP tool servers (requires MCP_ENCRYPTION_KEY) */
  mcp: boolean;
  /** AI image generation (requires BLOB_READ_WRITE_TOKEN) */
  imageGeneration: boolean;
  /** File attachments - images and PDFs (requires BLOB_READ_WRITE_TOKEN) */
  attachments: boolean;
  /** Follow-up question suggestions after AI responses */
  followupSuggestions: boolean;
};

export type ModelsConfig = {
  /** AI gateway backend */
  gateway: "vercel" | "openrouter" | "openai" | "openai-compatible";
  /** Provider sort order in model selector */
  providerOrder: string[];
  /** Models to hide from all users */
  disabledModels: AppModelId[];
  /** Default models enabled for new users */
  curatedDefaults: AppModelId[];
  /** Models available to anonymous users */
  anonymousModels: AppModelId[];
  /** Default model for each task type */
  defaults: {
    chat: AppModelId;
    title: AppModelId;
    pdf: AppModelId;
    artifact: AppModelId;
    artifactSuggestion: AppModelId;
    followupSuggestions: AppModelId;
    suggestions: AppModelId;
    polishText: AppModelId;
    formatSheet: AppModelId;
    analyzeSheet: AppModelId;
    codeEdits: AppModelId;
    chatImageCompatible: AppModelId;
    image: ImageModelId;
    deepResearch: AppModelId;
    deepResearchFinalReport: AppModelId;
  };
};

export type AnonymousConfig = {
  /** Message credits for anonymous users */
  credits: number;
  /** Tools available to anonymous users */
  availableTools: string[];
  /** Rate limits */
  rateLimit: {
    requestsPerMinute: number;
    requestsPerMonth: number;
  };
};

export type AttachmentsConfig = {
  /** Max file size in bytes after compression */
  maxBytes: number;
  /** Max image dimension (width/height) */
  maxDimension: number;
  /** Accepted MIME types with their file extensions */
  acceptedTypes: {
    "image/png": string[];
    "image/jpeg": string[];
    "application/pdf": string[];
  };
};

export type DeepResearchConfig = {
  /** Whether to ask clarifying questions before starting research */
  allowClarification: boolean;
  /** Maximum supervisor loop iterations (1–10) */
  maxResearcherIterations: number;
  /** Topics researched in parallel per iteration (1–20) */
  maxConcurrentResearchUnits: number;
  /** Max search queries per research topic (1–10) */
  maxSearchQueries: number;
};

export type Config = {
  appPrefix: string;
  appName: string;
  /** Browser tab title (defaults to appName) */
  appTitle?: string;
  appDescription: string;
  appUrl: string;

  organization: {
    name: string;
    contact: {
      privacyEmail: string;
      legalEmail: string;
    };
  };

  services: {
    hosting: string;
    aiProviders: string[];
    paymentProcessors: string[];
  };

  /** Feature flags — set to true to enable, requires corresponding env vars */
  features: FeaturesConfig;

  pricing?: PricingConfig;

  legal: {
    minimumAge: number;
    governingLaw: string;
    refundPolicy: string;
  };

  policies: {
    privacy: {
      title: string;
      lastUpdated?: string;
    };
    terms: {
      title: string;
      lastUpdated?: string;
    };
  };

  /** Auth provider toggles — set to true to enable, requires corresponding env vars */
  authentication: {
    /** Google OAuth (requires AUTH_GOOGLE_ID + AUTH_GOOGLE_SECRET) */
    google: boolean;
    /** GitHub OAuth (requires AUTH_GITHUB_ID + AUTH_GITHUB_SECRET) */
    github: boolean;
    /** Vercel OAuth (requires VERCEL_APP_CLIENT_ID + VERCEL_APP_CLIENT_SECRET) */
    vercel: boolean;
  };

  /** Model and gateway configuration */
  models: ModelsConfig;
  /** Anonymous user configuration */
  anonymous: AnonymousConfig;
  /** File attachment configuration */
  attachments: AttachmentsConfig;
  /** Deep research agent configuration */
  deepResearch: DeepResearchConfig;
};
```

## Gateway

The `models.gateway` field determines which AI backend is used for model creation and model-list fetching. Validated at build time.

| Value                 | Backend                                          | Required Env Vars                           |
| --------------------- | ------------------------------------------------ | ------------------------------------------- |
| `"vercel"` (default)  | [Vercel AI Gateway](/gateways/vercel)            | `AI_GATEWAY_API_KEY` or `VERCEL_OIDC_TOKEN` |
| `"openrouter"`        | [OpenRouter](/gateways/openrouter)               | `OPENROUTER_API_KEY`                        |
| `"openai"`            | [OpenAI](/gateways/openai)                       | `OPENAI_API_KEY`                            |
| `"openai-compatible"` | [OpenAI Compatible](/gateways/openai-compatible) | `OPENAI_COMPATIBLE_BASE_URL`                |

## Feature flags + env validation

Feature flags live under `features` and `authentication`. They're validated at build time by `scripts/check-env.ts`:

- Runs as `prebuild` step before `next build`
- Missing env vars will fail the build immediately

### Features

- **`features.sandbox`**: requires `VERCEL_OIDC_TOKEN` (on Vercel) _or_ `VERCEL_TEAM_ID + VERCEL_PROJECT_ID + VERCEL_TOKEN` (self-hosted)
- **`features.webSearch`**: requires `TAVILY_API_KEY` _or_ `FIRECRAWL_API_KEY`
- **`features.urlRetrieval`**: requires `FIRECRAWL_API_KEY` - fetch structured content from URLs
- **`features.deepResearch`**: requires `features.webSearch: true` - multi-step research agent
- **`features.mcp`**: requires `MCP_ENCRYPTION_KEY`
- **`features.imageGeneration`**: requires `BLOB_READ_WRITE_TOKEN` - AI-powered image generation tool
- **`features.attachments`**: requires `BLOB_READ_WRITE_TOKEN` - file uploads (images and PDFs)
- **`features.followupSuggestions`**: no env var required — generates contextual follow-up questions after responses

### Authentication

- **`authentication.google`**: requires `AUTH_GOOGLE_ID + AUTH_GOOGLE_SECRET`
- **`authentication.github`**: requires `AUTH_GITHUB_ID + AUTH_GITHUB_SECRET`
- **`authentication.vercel`**: requires `VERCEL_APP_CLIENT_ID + VERCEL_APP_CLIENT_SECRET`

## Notes on behavior

- **Anonymous limits**: `anonymous.credits` and rate limits are typically higher in dev and lower in prod (see `config.anonymous` implementation).
- **Models**: `models.defaults` drives which model is used per task; `models.disabledModels` hard-hides models globally; `models.anonymousModels` constrains what anonymous users can pick.
- **Deep research**: the `deepResearch` top-level config controls pipeline behavior (iterations, parallelism). Model selection for deep research uses `models.defaults.deepResearch` and `models.defaults.deepResearchFinalReport`.
